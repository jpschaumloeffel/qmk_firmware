#include QMK_KEYBOARD_H


enum layer_names {
    _NL1,
    _NL2,
    _NL3,
    _NL4,
    _FN,
};


// #define UC_ UC(0x0000)

// ümlauts
#define UC_AE     UC(0x00E4)
#define UC_SS     UC(0x00DF)
#define UC_OE     UC(0x00F6)
#define UC_UE     UC(0x00FC)
#define UC_AE_C   UC(0x00C4)
#define UC_SS_C   UC(0x1E9E)
#define UC_OE_C   UC(0x00D6)
#define UC_UE_C   UC(0x00DC)

// unsure - should use shifted or unicode? hotkeys? deadkeys?
#define UC_CIRC  UC(0x005E) // ^  // TODO should be deadkey
#define UC_ACUT  UC(0x00B4) // ´  // TODO should be deadkey
#define UC_GRAV  UC(0x0060) // `  // TODO should be deadkey

// number row shifted
#define UC_DEG   UC(0x00B0) // °  // TODO should be deadkey
#define UC_SECT  UC(0x00A7) // §
#define UC_SCRL  UC(0x2113) // ℓ
#define UC_RDAQ  UC(0x00BB) // »
#define UC_LDAQ  UC(0x00AB) // «
#define UC_DLR   UC(0x0024) // $  // KC_DLR?
#define UC_EURO  UC(0x20AC) // €
#define UC_LLDQ  UC(0x201E) // „
#define UC_LDQ   UC(0x201C) // “
#define UC_RDQ   UC(0x201D) // ”
#define UC_EMDS  UC(0x2014) // —
#define UC_CED   UC(0x00B8) // ¸  // TODO should be deadkey

#define UC_STIL  UC(0x02DC) // ˜  // TODO should be deadkey

#define UC_ENDS  UC(0x2013) // –
#define UC_BULT  UC(0x2022) // •


// layer 3 funky stuff
#define UC_BSLS  UC(0x005C)
#define UC_PIPE  UC(0x007C)
#define UC_TILD  UC(0x007E)
#define UC_SUP1  UC(0x00B9) // ¹
#define UC_SUP2  UC(0x00B2) // ²
#define UC_SUP3  UC(0x00B3) // ³
#define UC_SRAQ  UC(0x203A) // ›
#define UC_SLAQ  UC(0x2039) // ‹
#define UC_CENT  UC(0x00A2) // ¢
#define UC_YEN   UC(0x00A5) // ¥
#define UC_LLSQ  UC(0x201A) // ‚
#define UC_LSQ   UC(0x2018) // ‘
#define UC_RSQ   UC(0x2019) // ’
#define UC_ELLP  UC(0x2026) // …
#define UC_LNGS  UC(0x017F) // ſ

#define UC_MINS  UC(0x002D) // - because of :_) rolloff problem, should debug why that happens


// neo-shift -> go into layer 2
#define KC_LNSH LM(_NL2, MOD_LSFT)
#define KC_RNSH LM(_NL2, MOD_RSFT)

// neo mod 3 -> go into layer 3, no modifier applied
#define KC_MOD3 MO(_NL3)

// neo mod 4 -> go into layer 4, no modifier applied
#define KC_MOD4 MO(_NL4)

// take screenshot on mac
#define KC_SSHT C(S(G(KC_4)))


const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {

  [_NL1] = LAYOUT(
  //┌────────┬────────┬────────┬────────┬────────┬────────┐                          ┌────────┬────────┬────────┬────────┬────────┬────────┐
     KC_ESC,  KC_1,    KC_2,    KC_3,    KC_4,    KC_5,                               KC_6,    KC_7,    KC_8,    KC_9,    KC_0,    KC_BSPC,
  //├────────┼────────┼────────┼────────┼────────┼────────┤                          ├────────┼────────┼────────┼────────┼────────┼────────┤
     KC_TAB,  KC_X,    KC_V,    KC_L,    KC_C,    KC_W,                               KC_K,    KC_H,    KC_G,    KC_F,    KC_Q,    UC_SS,
  //├────────┼────────┼────────┼────────┼────────┼────────┤                          ├────────┼────────┼────────┼────────┼────────┼────────┤
     KC_MOD3, KC_U,    KC_I,    KC_A,    KC_E,    KC_O,                               KC_S,    KC_N,    KC_R,    KC_T,    KC_D,    KC_Y,
  //├────────┼────────┼────────┼────────┼────────┼────────┼────────┐        ┌────────┼────────┼────────┼────────┼────────┼────────┼────────┤
     KC_LSFT, UC_UE,   UC_OE,   UC_AE,   KC_P,    KC_Z,    KC_LALT,          MO(_FN), KC_B,    KC_M,    KC_COMM, KC_DOT,  KC_J,    KC_RSFT,
  //└────────┴────────┴────────┴───┬────┴───┬────┴───┬────┴───┬────┘        └───┬────┴───┬────┴───┬────┴───┬────┴────────┴────────┴────────┘
                                    KC_MOD4, KC_SPC,  KC_LGUI,                   KC_ENT,  KC_MOD4,  KC_LCTL
                                // └────────┴────────┴────────┘                 └────────┴────────┴────────┘
  ),

  [_NL2] = LAYOUT(
  //┌────────┬────────┬────────┬────────┬────────┬────────┐                          ┌────────┬────────┬────────┬────────┬────────┬────────┐
     _______, UC_DEG,  UC_SECT, UC_SCRL, UC_RDAQ, UC_LDAQ,                            UC_DLR,  UC_EURO, UC_LLDQ, UC_LDQ,  UC_RDQ,  UC_EMDS,
  //├────────┼────────┼────────┼────────┼────────┼────────┤                          ├────────┼────────┼────────┼────────┼────────┼────────┤
     _______, _______, _______, _______, _______, _______,                            _______, _______, _______, _______, _______, UC_SS_C,
  //├────────┼────────┼────────┼────────┼────────┼────────┤                          ├────────┼────────┼────────┼────────┼────────┼────────┤
     _______, _______, _______, _______, _______, _______,                            _______, _______, _______, _______, _______, _______,
  //├────────┼────────┼────────┼────────┼────────┼────────┼────────┐        ┌────────┼────────┼────────┼────────┼────────┼────────┼────────┤
     _______, UC_UE_C, UC_OE_C, UC_AE_C, _______, _______, _______,          _______, _______, _______, _______, _______, _______, _______,
  //└────────┴────────┴────────┴───┬────┴───┬────┴───┬────┴───┬────┘        └───┬────┴───┬────┴───┬────┴───┬────┴────────┴────────┴────────┘
                                    _______, _______, _______,                   _______, _______, _______
                                // └────────┴────────┴────────┘                 └────────┴────────┴────────┘
  ),

  [_NL3] = LAYOUT(
  //┌────────┬────────┬────────┬────────┬────────┬────────┐                          ┌────────┬────────┬────────┬────────┬────────┬────────┐
     _______, UC_SUP1, UC_SUP2, UC_SUP3, UC_SLAQ, UC_SRAQ,                            UC_CENT, UC_YEN,  UC_LLSQ, UC_LSQ,  UC_RSQ,  _______,
  //├────────┼────────┼────────┼────────┼────────┼────────┤                          ├────────┼────────┼────────┼────────┼────────┼────────┤
     _______, UC_ELLP, KC_UNDS, KC_LBRC, KC_RBRC, KC_CIRC,                            KC_EXLM, KC_LABK, KC_RABK, KC_EQL,  KC_AMPR, UC_LNGS,
  //├────────┼────────┼────────┼────────┼────────┼────────┤                          ├────────┼────────┼────────┼────────┼────────┼────────┤
     _______, KC_BSLS, KC_SLSH, KC_LCBR, KC_RCBR, KC_ASTR,                            KC_QUES, KC_LPRN, KC_RPRN, KC_MINS, KC_COLN, KC_AT,
  //├────────┼────────┼────────┼────────┼────────┼────────┼────────┐        ┌────────┼────────┼────────┼────────┼────────┼────────┼────────┤
     _______, KC_HASH, KC_DLR,  KC_PIPE, KC_TILD, KC_GRAVE,_______,          _______, KC_PLUS, KC_PERC, KC_DQUO, KC_QUOT, KC_SCLN, _______,
  //└────────┴────────┴────────┴───┬────┴───┬────┴───┬────┴───┬────┘        └───┬────┴───┬────┴───┬────┴───┬────┴────────┴────────┴────────┘
                                    _______, _______, _______,                   _______, _______, _______
                                // └────────┴────────┴────────┘                 └────────┴────────┴────────┘
  ),

  [_NL4] = LAYOUT(
  //┌────────┬────────┬────────┬────────┬────────┬────────┐                          ┌────────┬────────┬────────┬────────┬────────┬────────┐
     KC_F12,  KC_F1,   KC_F2,   KC_F3,   KC_F4,   KC_F5,                              KC_F6,   KC_F7,   KC_F8,   KC_F9,   KC_F10,  KC_F11,
  //├────────┼────────┼────────┼────────┼────────┼────────┤                          ├────────┼────────┼────────┼────────┼────────┼────────┤
     _______, KC_PGUP, KC_BSPC, KC_UP,   KC_DEL,  KC_PGDN,                            _______, KC_7,    KC_8,    KC_9,    KC_PLUS, _______,
  //├────────┼────────┼────────┼────────┼────────┼────────┤                          ├────────┼────────┼────────┼────────┼────────┼────────┤
     _______, KC_HOME, KC_LEFT, KC_DOWN, KC_RGHT, KC_END,                             _______, KC_4,    KC_5,    KC_6,    _______, _______,
  //├────────┼────────┼────────┼────────┼────────┼────────┼────────┐        ┌────────┼────────┼────────┼────────┼────────┼────────┼────────┤
     _______, _______, KC_TAB,  KC_INS,  KC_ENT,  _______, _______,          _______, KC_COLN, KC_1,    KC_2,    KC_3,    _______, _______,
  //└────────┴────────┴────────┴───┬────┴───┬────┴───┬────┴───┬────┘        └───┬────┴───┬────┴───┬────┴───┬────┴────────┴────────┴────────┘
                                    _______, _______, _______,                   _______, KC_0,    _______
                                // └────────┴────────┴────────┘                 └────────┴────────┴────────┘
  ),

  [_FN] = LAYOUT(
  //┌────────┬────────┬────────┬────────┬────────┬────────┐                          ┌────────┬────────┬────────┬────────┬────────┬────────┐
     KC_F12,  KC_F1,   KC_F2,   KC_F3,   KC_F4,   KC_F5,                              KC_F6,   KC_F7,   KC_F8,   KC_F9,   KC_F10,  KC_F11,
  //├────────┼────────┼────────┼────────┼────────┼────────┤                          ├────────┼────────┼────────┼────────┼────────┼────────┤
     _______, _______, _______, _______, _______, _______,                            _______, _______, _______, _______, _______, UC_MOD,
  //├────────┼────────┼────────┼────────┼────────┼────────┤                          ├────────┼────────┼────────┼────────┼────────┼────────┤
     _______, _______, _______, _______, _______, _______,                            _______, _______, _______, _______, _______, _______,
  //├────────┼────────┼────────┼────────┼────────┼────────┼────────┐        ┌────────┼────────┼────────┼────────┼────────┼────────┼────────┤
     _______, _______, _______, _______, _______, _______, _______,          _______, _______, _______, _______, _______, _______, _______,
  //└────────┴────────┴────────┴───┬────┴───┬────┴───┬────┴───┬────┘        └───┬────┴───┬────┴───┬────┴───┬────┴────────┴────────┴────────┘
                                    _______, _______, _______,                   _______, _______, _______
                                // └────────┴────────┴────────┘                 └────────┴────────┴────────┘
  )
};

bool process_record_user(uint16_t keycode, keyrecord_t* record) {
    switch(keycode) {
        case KC_MINS:
            unregister_mods(MOD_MASK_SHIFT);
            unregister_weak_mods(MOD_MASK_SHIFT);
            return true;
    }
    return true;
}